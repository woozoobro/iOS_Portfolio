//
//  MarketDataModel.swift
//  SwiftfulCrypto
//
//  Created by 우주형 on 2023/02/28.
//

import Foundation

// JSON Data:
/*
 
 URL: https://api.coingecko.com/api/v3/global
 
 JSON Response:
 {
   "data": {
     "active_cryptocurrencies": 12310,
     "upcoming_icos": 0,
     "ongoing_icos": 49,
     "ended_icos": 3376,
     "markets": 671,
     "total_market_cap": {
       "btc": 47869493.37023512,
       "eth": 687119957.1362023,
       "ltc": 11813499783.690659,
       "bch": 8423826336.503646,
       "bnb": 3705862369.0879393,
       "eos": 964183432812.8246,
       "xrp": 2973012531948.3433,
       "xlm": 12756001726435.256,
       "link": 153221963088.18243,
       "dot": 173057540228.5836,
       "yfi": 121157623.83379205,
       "usd": 1118656081818.5054,
       "aed": 4108611243863.822,
       "ars": 220141102213759.9,
       "aud": 1661958255699.6255,
       "bdt": 119031920400074.47,
       "bhd": 421828428612.53094,
       "bmd": 1118656081818.5054,
       "brl": 5818689609578.953,
       "cad": 1518226610371.0908,
       "chf": 1049576831454.0497,
       "clp": 932746627581086.8,
       "cny": 7761012164440.41,
       "czk": 24821858680814.695,
       "dkk": 7844821878090.253,
       "eur": 1053991048352.9065,
       "gbp": 925070409547.6498,
       "hkd": 8781058712646.638,
       "huf": 398516280213336.25,
       "idr": 17077150419778302,
       "ils": 4104972255629.667,
       "inr": 92389800204110.06,
       "jpy": 152939303537980.66,
       "krw": 1480105533911619,
       "kwd": 343420705181.79004,
       "lkr": 405144191089973.9,
       "mmk": 2343874096926820.5,
       "mxn": 20510391461730.01,
       "myr": 5019969167160.562,
       "ngn": 513401425298660.2,
       "nok": 11562063461137.285,
       "nzd": 1816385371826.4258,
       "php": 61848254095613.14,
       "pkr": 287688241208557.7,
       "pln": 4972097398795.191,
       "rub": 83915985977614.89,
       "sar": 4198180917678.947,
       "sek": 11673488318822.932,
       "sgd": 1508703491146.5715,
       "thb": 39542740676860.02,
       "try": 21127386223656.992,
       "twd": 34369030129750.812,
       "uah": 41019768302393.836,
       "vef": 112011033472.48685,
       "vnd": 26590357371471556,
       "zar": 20646385362940.617,
       "xdr": 840634248491.9861,
       "xag": 54355152232.175995,
       "xau": 617889686.7924523,
       "bits": 47869493370235.125,
       "sats": 4786949337023512
     },
     "total_volume": {
       "btc": 2618514.628982683,
       "eth": 37586227.322511196,
       "ltc": 646211602.1121745,
       "bch": 460792687.39158696,
       "bnb": 202714801.082206,
       "eos": 52741908177.64075,
       "xrp": 162627098366.0788,
       "xlm": 697767508623.1024,
       "link": 8381412118.25154,
       "dot": 9466440290.886236,
       "yfi": 6627457.031304846,
       "usd": 61191734209.235855,
       "aed": 224745613321.0234,
       "ars": 12041963597332.117,
       "aud": 90910968529.57224,
       "bdt": 6511178684780.101,
       "bhd": 23074485094.289696,
       "bmd": 61191734209.235855,
       "brl": 318288805489.34015,
       "cad": 83048687367.96423,
       "chf": 57413022238.34716,
       "clp": 51022279901002.88,
       "cny": 424536013596.83563,
       "czk": 1357783329176.9983,
       "dkk": 429120498323.79156,
       "eur": 57654484821.53686,
       "gbp": 50602382220.8592,
       "hkd": 480333696435.5286,
       "huf": 21799284599808.113,
       "idr": 934139157264024.6,
       "ils": 224546556609.64078,
       "inr": 5053825022382.125,
       "jpy": 8365950325884.103,
       "krw": 80963422006794.53,
       "kwd": 18785495251.830143,
       "lkr": 22161838710331.887,
       "mmk": 128212524912843.25,
       "mxn": 1121941267966.2075,
       "myr": 274597907263.94693,
       "ngn": 28083630054062.945,
       "nok": 632457755089.5737,
       "nzd": 99358303861.95468,
       "php": 3383168417385.0215,
       "pkr": 15736867369047.883,
       "pln": 271979268190.1953,
       "rub": 4590297941705.812,
       "sar": 229645174287.42264,
       "sek": 638552818967.2206,
       "sgd": 82527762134.6411,
       "thb": 2163031978040.7153,
       "try": 1155691568969.3105,
       "twd": 1880024245977.4558,
       "uah": 2243827035029.4883,
       "vef": 6127128346.370781,
       "vnd": 1454522178218194.2,
       "zar": 1129380285902.2905,
       "xdr": 45983630122.74592,
       "xag": 2973287395.7891755,
       "xau": 33799254.39047148,
       "bits": 2618514628982.683,
       "sats": 261851462898268.3
     },
     "market_cap_percentage": {
       "btc": 40.32644573450911,
       "eth": 17.53431252087983,
       "usdt": 6.342310684815758,
       "bnb": 4.260822043546255,
       "usdc": 3.800013006453599,
       "xrp": 1.7137809217160578,
       "ada": 1.1376800874089896,
       "okb": 1.1352151985347358,
       "doge": 1.0104180629878072,
       "matic": 0.9870334248855136
     },
     "market_cap_change_percentage_24h_usd": -0.3598516873628549,
     "updated_at": 1677584457
   }
 }
 
 */

struct GlobalData: Codable {
    let data: MarketDataModel?
}

struct MarketDataModel: Codable {
    let totalMarketCap, totalVolume, marketCapPercentage: [String: Double]
    let marketCapChangePercentage24HUsd: Double
    
    enum CodingKeys: String, CodingKey {
        case totalMarketCap = "total_market_cap"
        case totalVolume = "total_volume"
        case marketCapPercentage = "market_cap_percentage"
        case marketCapChangePercentage24HUsd = "market_cap_change_percentage_24h_usd"
    }
}
